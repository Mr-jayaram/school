<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Management - Settings</title>
    <link rel="shortcut icon" href="https://jaiinfo.tech/logo/logo_only.png">
    <!-- Bootstrap CSS -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts (Example: Poppins for a similar look) -->
    <link href="assets/css/css2.css" rel="stylesheet">
    <!-- Bootstrap Icons CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

    <!-- Link to your external style.css file -->
    <link rel="stylesheet" href="assets/css/style.css">

</head>
<body>
    <div class="wrapper">
        <!-- Sidebar -->
       <aside class="sidebar" id="sidebar">
            <div class="logo">
                <a href="index.html">
                   <img src="https://jaiinfo.tech/logo/logo_only.png" class="sidebar-icon" alt="Logo">
                   <span>Admin</span>
                </a>
            </div>
            <nav class="menu">
                <a href="index.html" class="menu-item">
                    <i class="bi bi-speedometer2 menu-icon"></i> <span>Dashboard</span>
                </a>

                <a href="javascript:void(0);" class="menu-item menu-item-toggle has-submenu">
                   <i class="bi bi-person-badge menu-icon"></i> <span>Add Member</span> <span class="arrow-icon">&#9660;</span>
                </a>
                <div class="submenu">
                    <a href="staff.html" class="submenu-item">Staffs</a>
                    <a href="student.html" class="submenu-item">Students</a>
                </div>

                <a href="attendance.html" class="menu-item">
                    <i class="bi bi-calendar-check menu-icon"></i> <span>Attendance</span>
                </a>
                <a href="fees.html" class="menu-item">
                    <i class="bi bi-wallet2 menu-icon"></i> <span>Fees</span>
                </a>
                <a href="expenses.html" class="menu-item">
                    <i class="bi bi-cash-coin menu-icon"></i> <span>Expenses</span>
                </a>

                   <a href="javascript:void(0);" class="menu-item menu-item-toggle has-submenu"> <!-- Active Reports link -->
                    <i class="bi bi-graph-up-arrow menu-icon"></i> <span>Reports</span> <span class="arrow-icon">&#9660;</span>
                </a>
                <div class="submenu"> <!-- Keep submenu open for active page -->
                    <a href="report.html" class="submenu-item">Student Reports</a>
                    <a href="report.html" class="submenu-item">Staff Reports</a>
                    <a href="report.html" class="submenu-item">Attendance Reports</a>
                </div>

                <a href="annoncement.html" class="menu-item">
                    <i class="bi bi-chat-dots menu-icon"></i> <span>Announcements</span>
                </a>
                <a href="settings.html" class="menu-item active">
                    <i class="bi bi-gear menu-icon"></i> <span>Settings</span>
                </a>

                <a href="javascript:void(0);" class="menu-item menu-item-toggle has-submenu">
                  <i class="bi bi-shield-lock menu-icon"></i> <span>Auth</span>
                  <span class="arrow-icon">&#9660;</span>
                </a>
                <div class="submenu">
                    <a href="login.html" class="submenu-item">Login</a>
                    <a href="register.html" class="submenu-item">Register</a>
                </div>
            </nav>

        </aside>

        <!-- Sidebar Overlay (for mobile) -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Main Content Area -->
        <main class="main-content">
            <header class="header">
                <div class="d-flex align-items-center">
                    <button class="menu-toggle" id="menuToggle" aria-label="Toggle mobile menu">
                        &#9776; <!-- Hamburger icon -->
                    </button>
                    <div>
                       <i class="bi bi-search search-icon"></i>
                    </div>
                </div>
                <div class="user-profile">
                    <img src="assets/img/logo/user.png" alt="Avatar">
                    <div class="user-info">
                        <h6>Jon Principal</h6>
                        <span>School Admin</span>
                    </div>
                </div>
            </header>

            <section class="settings-section">
                <div class="row g-4">
                    <div class="col-lg-4 col-md-12">
                        <div class="card settings-navigation-card">
                            <ul class="nav flex-column nav-pills" id="settingsTabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                  <button class="nav-link active" id="general-tab" data-bs-toggle="pill" data-bs-target="#general-settings" type="button" role="tab" aria-controls="general-settings" aria-selected="true"><i class="bi bi-person me-2"></i>General Account</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                  <button class="nav-link" id="security-tab" data-bs-toggle="pill" data-bs-target="#security-settings" type="button" role="tab" aria-controls="security-settings" aria-selected="false"><i class="bi bi-shield-lock me-2"></i>Security</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                  <button class="nav-link" id="notifications-tab" data-bs-toggle="pill" data-bs-target="#notifications-settings" type="button" role="tab" aria-controls="notifications-settings" aria-selected="false"><i class="bi bi-bell me-2"></i>Notifications</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                  <button class="nav-link" id="appearance-tab" data-bs-toggle="pill" data-bs-target="#appearance-settings" type="button" role="tab" aria-controls="appearance-settings" aria-selected="false"><i class="bi bi-palette me-2"></i>Appearance</button>
                                </li>
                                <!-- NEW: Students Class Promotions Tab -->
                                <li class="nav-item" role="presentation">
                                  <button class="nav-link" id="promotions-tab" data-bs-toggle="pill" data-bs-target="#promotions-settings" type="button" role="tab" aria-controls="promotions-settings" aria-selected="false"><i class="bi bi-arrow-up-circle me-2"></i>Students Class Promotions</button>
                                </li>
                                <!-- END NEW -->
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-8 col-md-12">
                        <div class="card settings-content-card">
                            <div class="tab-content" id="settingsTabContent">
                                <!-- General Account Settings -->
                                <div class="tab-pane fade show active" id="general-settings" role="tabpanel" aria-labelledby="general-tab">
                                    <h5 class="mb-4">General Account Settings</h5>
                                    <form>
                                        <div class="mb-3">
                                            <label for="fullName" class="form-label">Full Name</label>
                                            <input type="text" class="form-control" id="fullName" value="Jon Principal">
                                        </div>
                                        <div class="mb-3">
                                            <label for="emailAddress" class="form-label">Email Address</label>
                                            <input type="email" class="form-control" id="emailAddress" value="jon.principal@edudash.com">
                                        </div>
                                        <div class="mb-3">
                                            <label for="jobTitle" class="form-label">Job Title</label>
                                            <input type="text" class="form-control" id="jobTitle" value="School Admin">
                                        </div>
                                        <div class="mb-3">
                                            <label for="profilePicture" class="form-label">Profile Picture</label>
                                            <input class="form-control" type="file" id="profilePicture">
                                        </div>
                                        <button type="submit" class="btn btn-primary mt-3">Save Changes</button>
                                    </form>
                                </div>

                                <!-- Security Settings -->
                                <div class="tab-pane fade" id="security-settings" role="tabpanel" aria-labelledby="security-tab">
                                    <h5 class="mb-4">Security Settings</h5>
                                    <form>
                                        <div class="mb-3">
                                            <label for="currentPassword" class="form-label">Current Password</label>
                                            <input type="password" class="form-control" id="currentPassword">
                                        </div>
                                        <div class="mb-3">
                                            <label for="newPassword" class="form-label">New Password</label>
                                            <input type="password" class="form-control" id="newPassword">
                                        </div>
                                        <div class="mb-3">
                                            <label for="confirmNewPassword" class="form-label">Confirm New Password</label>
                                            <input type="password" class="form-control" id="confirmNewPassword">
                                        </div>
                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="twoFactorAuth" checked>
                                            <label class="form-check-label" for="twoFactorAuth">Two-Factor Authentication</label>
                                        </div>
                                        <button type="submit" class="btn btn-primary mt-3">Update Security</button>
                                    </form>
                                </div>

                                <!-- Notifications Settings -->
                                <div class="tab-pane fade" id="notifications-settings" role="tabpanel" aria-labelledby="notifications-tab">
                                    <h5 class="mb-4">Notification Preferences</h5>
                                    <form>
                                        <div class="mb-3">
                                            <label class="form-label">Email Notifications</label>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="emailAnnouncements" checked>
                                                <label class="form-check-label" for="emailAnnouncements">Announcements</label>
                                            </div>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="emailReports">
                                                <label class="form-check-label" for="emailReports">Reports & Analytics</label>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Push Notifications (Mobile/Browser)</label>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="pushNewEnrollments" checked>
                                                <label class="form-check-label" for="pushNewEnrollments">New Enrollments</label>
                                            </div>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="pushAttendanceAlerts">
                                                <label class="form-check-label" for="pushAttendanceAlerts">Attendance Alerts</label>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-primary mt-3">Save Preferences</button>
                                    </form>
                                </div>

                                <!-- Appearance Settings -->
                                <div class="tab-pane fade" id="appearance-settings" role="tabpanel" aria-labelledby="appearance-tab">
                                    <h5 class="mb-4">Appearance Settings</h5>
                                    <form>
                                        <div class="mb-3">
                                            <label for="themeSelect" class="form-label">Theme</label>
                                            <select class="form-select" id="themeSelect">
                                                <option selected>Light Theme</option>
                                                <option>Dark Theme</option>
                                                <option>System Default</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="sidebarStyle" class="form-label">Sidebar Style</label>
                                            <select class="form-select" id="sidebarStyle">
                                                <option selected>Expanded (Default)</option>
                                                <option>Collapsed (Icons only)</option>
                                            </select>
                                        </div>
                                        <button type="submit" class="btn btn-primary mt-3">Apply Appearance</button>
                                    </form>
                                </div>

                                <!-- NEW: Students Class Promotions Settings -->
                                <div class="tab-pane fade" id="promotions-settings" role="tabpanel" aria-labelledby="promotions-tab">
                                    <h5 class="mb-4">Students Class Promotions</h5>
                                    <form id="promotionForm">
                                        <div class="row g-3">
                                            <div class="col-md-6 mb-3">
                                                <label for="currentAcademicYear" class="form-label">Current Academic Year</label>
                                                <select class="form-select" id="currentAcademicYear" required>
                                                    <option value="">Select Year</option>
                                                    <option value="2024-2025" selected>2024-2025</option>
                                                    <option value="2023-2024">2023-2024</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="targetAcademicYear" class="form-label">Promote to Academic Year</label>
                                                <select class="form-select" id="targetAcademicYear" required>
                                                    <option value="">Select Year</option>
                                                    <option value="2025-2026" selected>2025-2026</option>
                                                    <option value="2024-2025">2024-2025</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row g-3">
                                            <div class="col-md-6 mb-3">
                                                <label for="currentClass" class="form-label">Current Class</label>
                                                <select class="form-select" id="currentClass" required>
                                                    <option value="">Select Class</option>
                                                    <option value="Grade 1">Grade 1</option>
                                                    <option value="Grade 2">Grade 2</option>
                                                    <option value="Grade 3" selected>Grade 3</option>
                                                    <option value="Grade 4">Grade 4</option>
                                                    <option value="Grade 5">Grade 5</option>
                                                    <option value="Grade 6">Grade 6</option>
                                                    <option value="Grade 7">Grade 7</option>
                                                    <option value="Grade 8">Grade 8</option>
                                                    <option value="Grade 9">Grade 9</option>
                                                    <option value="Grade 10">Grade 10</option>
                                                    <option value="Grade 11">Grade 11</option>
                                                    <option value="Grade 12">Grade 12</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="targetClass" class="form-label">Promote to Class</label>
                                                <select class="form-select" id="targetClass" required>
                                                    <option value="">Select Class</option>
                                                    <option value="Grade 1">Grade 1</option>
                                                    <option value="Grade 2">Grade 2</option>
                                                    <option value="Grade 3">Grade 3</option>
                                                    <option value="Grade 4" selected>Grade 4</option>
                                                    <option value="Grade 5">Grade 5</option>
                                                    <option value="Grade 6">Grade 6</option>
                                                    <option value="Grade 7">Grade 7</option>
                                                    <option value="Grade 8">Grade 8</option>
                                                    <option value="Grade 9">Grade 9</option>
                                                    <option value="Grade 10">Grade 10</option>
                                                    <option value="Grade 11">Grade 11</option>
                                                    <option value="Grade 12">Grade 12</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="mb-4">
                                            <label for="promotionCriteria" class="form-label">Promotion Criteria (Optional)</label>
                                            <input type="text" class="form-control" id="promotionCriteria" placeholder="e.g., Min. 70% average, passed all core subjects">
                                            <div class="form-text">Specify any additional criteria for automatic promotion.</div>
                                        </div>

                                        <div class="d-flex justify-content-end gap-2">
                                            <button type="button" class="btn btn-outline-secondary" id="previewPromotions">Preview Students</button>
                                            <button type="submit" class="btn btn-primary">Promote Students</button>
                                        </div>
                                    </form>
                                    <div id="promotionResults" class="mt-4" style="display:none;">
                                        <h6 class="mb-3">Students for Promotion (Preview)</h6>
                                        <div class="alert alert-info" role="alert">
                                            This is a preview. No changes have been made yet.
                                        </div>
                                        <ul class="list-group">
                                            <li class="list-group-item">Student A - Current: Grade 3, Promote to: Grade 4</li>
                                            <li class="list-group-item">Student B - Current: Grade 3, Promote to: Grade 4</li>
                                            <li class="list-group-item">Student C - Current: Grade 3, Promote to: Grade 4</li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- END NEW -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Bootstrap JS and Popper.js -->
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Specific logic for Students Class Promotions tab ---
        const promotionForm = document.getElementById('promotionForm');
        const previewPromotionsBtn = document.getElementById('previewPromotions');
        const promotionResultsDiv = document.getElementById('promotionResults');
        const promotionResultsList = promotionResultsDiv.querySelector('.list-group'); // Select the ul element

        // Dummy student data for preview
        const dummyStudents = [
            { id: 1, name: 'Student A', currentClass: 'Grade 3' },
            { id: 2, name: 'Student B', currentClass: 'Grade 3' },
            { id: 3, name: 'Student C', currentClass: 'Grade 3' },
            { id: 4, name: 'Student D', currentClass: 'Grade 3' },
            { id: 5, name: 'Student E', currentClass: 'Grade 3' },
        ];

        previewPromotionsBtn.addEventListener('click', () => {
            const currentYear = document.getElementById('currentAcademicYear').value;
            const targetYear = document.getElementById('targetAcademicYear').value;
            const currentClass = document.getElementById('currentClass').value;
            const targetClass = document.getElementById('targetClass').value;

            if (!currentYear || !targetYear || !currentClass || !targetClass) {
                alert('Please select all academic years and classes for preview.');
                return;
            }

            // Simulate fetching students based on currentClass and currentYear
            const eligibleStudents = dummyStudents.filter(s => s.currentClass === currentClass);

            promotionResultsList.innerHTML = ''; // Clear previous results
            if (eligibleStudents.length > 0) {
                eligibleStudents.forEach(student => {
                    const listItem = document.createElement('li');
                    listItem.classList.add('list-group-item');
                    listItem.textContent = `${student.name} - Current: ${student.currentClass}, Promote to: ${targetClass}`;
                    promotionResultsList.appendChild(listItem);
                });
            } else {
                const listItem = document.createElement('li');
                listItem.classList.add('list-group-item', 'text-muted');
                listItem.textContent = 'No eligible students found for this class in the current academic year.';
                promotionResultsList.appendChild(listItem);
            }

            promotionResultsDiv.style.display = 'block'; // Show the preview section
        });


        promotionForm.addEventListener('submit', (event) => {
            event.preventDefault(); // Prevent actual form submission

            const currentYear = document.getElementById('currentAcademicYear').value;
            const targetYear = document.getElementById('targetAcademicYear').value;
            const currentClass = document.getElementById('currentClass').value;
            const targetClass = document = document.getElementById('targetClass').value;
            const criteria = document.getElementById('promotionCriteria').value;

            if (confirm(`Are you sure you want to promote students from ${currentClass} (${currentYear}) to ${targetClass} (${targetYear})?`)) {
                // In a real application, this is where you'd send an AJAX request to your backend
                // to perform the actual database update for student promotions.
                console.log('Promoting students with the following settings:', {
                    currentYear,
                    targetYear,
                    currentClass,
                    targetClass,
                    criteria
                });

                alert(`Students from ${currentClass} (${currentYear}) successfully promoted to ${targetClass} (${targetYear})!`);
                promotionResultsDiv.style.display = 'none'; // Hide preview after promotion
                promotionForm.reset(); // Reset form
            }
        });
    });
</script>
</body>
</html>